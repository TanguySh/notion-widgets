<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notion Google Clock</title>
    <style>
        /* --- VARIABLES --- */
        :root {
            --text-color: #37352f;
            --accent-color: #4285f4;
        }

        /* --- BASE --- */
        body {
            margin: 0;
            padding: 0;
            font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif;
            color: var(--text-color);
            background-color: transparent;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            
            /* C'EST ICI QUE LA MAGIE DU CENTRAGE OPÈRE */
            display: flex;
            flex-direction: column;
            align-items: center;     /* Centre Horizontalement */
            justify-content: center; /* Centre Verticalement */
        }

        @media (prefers-color-scheme: dark) {
            body { color: #d4d4d4; }
        }

        .container {
            text-align: center;
            /* Empêche le texte de se casser bizarrement sur très petit écran */
            white-space: nowrap; 
        }

        /* --- HEURE --- */
        #time {
            font-size: 3.5rem; /* Gros et Lisible */
            font-weight: 600;
            line-height: 1;
            letter-spacing: -0.02em;
            margin-bottom: 5px;
            font-variant-numeric: tabular-nums; /* Empêche les chiffres de bouger */
        }

        /* --- DATE --- */
        #date {
            font-size: 1rem;
            color: #9b9a97;
            font-weight: 500;
            text-transform: capitalize;
        }

        /* Option pour colorer l'heure */
        .colored-time {
            color: var(--accent-color);
        }

    </style>
</head>
<body>

    <div class="container">
        <div id="time">00:00</div>
        <div id="date">Chargement...</div>
    </div>

    <script>
        // --- CONFIG VIA URL ---
        const params = new URLSearchParams(window.location.search);
        // Options : '12' ou '24' (défaut 24)
        const FORMAT = params.get('format') === '12' ? '12' : '24';
        // Options : 'true' ou 'false' (défaut false)
        const SECONDS = params.get('seconds') === 'true';
        // Couleur personnalisée (ex: ?color=blue)
        const COLOR = params.get('color');

        const timeEl = document.getElementById('time');
        const dateEl = document.getElementById('date');

        // Gestion des couleurs Google
        const googleColors = {
            'blue': '#4285f4', 'red': '#ea4335', 'yellow': '#fbbc04', 
            'green': '#34a853', 'purple': '#a142f4'
        };

        if (COLOR) {
            const finalColor = googleColors[COLOR] || COLOR;
            timeEl.style.color = finalColor;
        }

        function updateClock() {
            const now = new Date();

            // 1. HEURE
            let hours = now.getHours();
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const secondsStr = String(now.getSeconds()).padStart(2, '0');
            let ampm = '';

            if (FORMAT === '12') {
                ampm = hours >= 12 ? ' PM' : ' AM';
                hours = hours % 12;
                hours = hours ? hours : 12; // L'heure '0' devient '12'
            } else {
                hours = String(hours).padStart(2, '0');
            }

            let timeString = `${hours}:${minutes}`;
            if (SECONDS) timeString += `:${secondsStr}`;
            if (FORMAT === '12') timeString += `<span style="font-size:0.4em; margin-left:5px;">${ampm}</span>`;

            timeEl.innerHTML = timeString;

            // 2. DATE
            const options = { weekday: 'long', day: 'numeric', month: 'long' };
            // On force le français
            dateEl.textContent = now.toLocaleDateString('fr-FR', options);
        }

        setInterval(updateClock, 1000);
        updateClock();
    </script>
</body>
</html>
